<!DOCTYPE HTML>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="./assets/stylesheets/normalize.css">
        <script src="./assets/javascripts/createjs.min.js" type="text/javascript"></script>
        <title>demo</title>
    </head>
    <body>
        <canvas id="demoCanvas" width="1366" height="768">
            Canvasが使えるブラウザで見てね
        </canvas>
    </body>
    <script>
    (function(window){
        var cj = createjs,
            stage, bitmap;
        var objects = [];

        function init() {
            stage = new cj.Stage('demoCanvas');

            // キューオブジェクトを生成
            var queue = new createjs.LoadQueue();
            var i;

            var arr=[];
            for(i=0; i<100; i++) {
              arr.push({id:'image_'+i, src:'./assets/images/virus.png'});
            }

            // 読み込み実行
            queue.loadManifest(arr);

            // 各ファイル読み込み完了時
            queue.addEventListener('fileload', function(e){
                // 画像の場合
                if(e.item.type === createjs.LoadQueue.IMAGE){
                    var bitmap = new createjs.Bitmap(e.result);
                    bitmap.x = (Math.random() * 1366);
                    bitmap.y = (Math.random() * 768);
                    stage.addChild(bitmap);
                    objects.push(bitmap);
                }
            });

            stage.update();
        }

        window.addEventListener('load', function(){
            window.removeEventListener('load', arguments.callee);

            init();
        }, false);

        // Stageオブジェクトを作成
        var stage = new createjs.Stage('canvas');

        // Bitmapオブジェクトを作成
        var bitmap = new createjs.Bitmap('images/image_1.png');

        // stageにBitmapオブジェクトを配置
        stage.addChild(bitmap);

        // canvasの描画設定
        createjs.Ticker.setFPS(30);
        createjs.Ticker.addEventListener('tick', function(){
            for(var i = 0; i < objects.length; i++) {
                objects[i].y+=1;
            }

            stage.update();
        });
    }(window));
    </script>
</html>
